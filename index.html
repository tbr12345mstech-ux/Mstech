
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>MSTECH ìƒí’ˆ ì¸ì‹ & íŒë§¤ê¸€</title>
<style>
body { background:#10131a; color:white; font-family:sans-serif; text-align:center; padding:20px; }
button{ padding:12px 18px; border-radius:10px; border:none; font-size:18px; margin:10px; cursor:pointer; }
#start{ background:#1de9b6; }
#stop{ background:#37474f; color:white; }
video{ width:90vw; max-width:420px; border-radius:12px; margin-top:15px; }
input{ width:80%; padding:12px; margin-top:15px; border-radius:8px; border:none; font-size:16px; }
</style>

<script src="https://cdn.jsdelivr.net/npm/@zxing/library@0.19.0/umd/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@zxing/browser@0.1.5/umd/index.min.js"></script>
</head>

<body>

<h2>MSTECH ìƒí’ˆ ì¸ì‹ & íŒë§¤ê¸€</h2>

<button id="start">ğŸ“· ì¹´ë©”ë¼ ìŠ¤ìº” ì‹œì‘</button>
<button id="stop">ì •ì§€</button>

<video id="preview" playsinline></video>

<input id="barcode" placeholder="ë°”ì½”ë“œ ìë™ ì…ë ¥">

<script>
let codeReader;
let stream;

async function startCamera(){
  try{
    codeReader = new ZXingBrowser.BrowserMultiFormatReader();
    stream = await navigator.mediaDevices.getUserMedia({ video:{ facingMode:"environment" } });
    const video = document.getElementById('preview');
    video.srcObject = stream;
    await video.play();

    codeReader.decodeFromVideoDevice(null, video, (result, err)=>{
      if(result){
        document.getElementById("barcode").value = result.text;
      }
    });
  }catch(e){
    alert("ì¹´ë©”ë¼ ì ‘ê·¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.");
  }
}

function stopCamera(){
  if(stream){
    stream.getTracks().forEach(t=>t.stop());
  }
  if(codeReader){
    codeReader.reset();
  }
}

document.getElementById("start").onclick = startCamera;
document.getElementById("stop").onclick = stopCamera;
</script>

</body>
</html>
