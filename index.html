<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MSTECH ìƒí’ˆ ì¸ì‹ & íŒë§¤ê¸€</title>

  <style>
    body { font-family: Pretendard, sans-serif; margin: 0; padding: 20px; background: #111; color: #fff; }
    h1 { font-size: 22px; margin-bottom: 15px; }
    button { padding: 12px; background: #00f0c8; border-radius: 10px; border: 0; font-size: 17px; margin-top: 10px; width: 100%; }
    input, textarea { width: 100%; padding: 12px; border-radius: 10px; border: 0; margin-top: 10px; font-size: 16px; }
    video, img { width: 100%; border-radius: 12px; margin-top: 12px; background: #000; }
  </style>

  <script src="https://unpkg.com/quagga@0.12.1/dist/quagga.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.5/dist/tesseract.min.js"></script>
</head>

<body>
  <h1>MSTECH ìƒí’ˆ ì¸ì‹ & íŒë§¤ê¸€</h1>

  <button id="startScan">ğŸ“· ì¹´ë©”ë¼ ìŠ¤ìº” ì‹œì‘</button>
  <video id="video"></video>

  <h3>ë°”ì½”ë“œ</h3>
  <input id="barcode" placeholder="ë°”ì½”ë“œ ìë™ ì…ë ¥" readonly />

  <h3>ì˜ˆìƒ ìƒ‰ìƒ</h3>
  <input id="color" value="ìë™ ê°ì§€ ì¤‘..." readonly />

  <h3>ëª¨ë¸/í‚¤ì›Œë“œ í›„ë³´</h3>
  <textarea id="ocrText" rows="5" placeholder="OCR í…ìŠ¤íŠ¸"></textarea>

  <script>
    document.getElementById("startScan").onclick = () => {
      Quagga.init({
        inputStream: { name: "Live", type: "LiveStream", target: document.querySelector("#video") },
        decoder: { readers: ["ean_reader", "code_128_reader"] }
      }, err => {
        if (err) return alert("ì¹´ë©”ë¼ ì ‘ê·¼ ì‹¤íŒ¨ âŒ");
        Quagga.start();
      });

      Quagga.onDetected(e => {
        document.getElementById("barcode").value = e.codeResult.code;
      });
    };

    // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ OCR(ëª¨ë¸ í…ìŠ¤íŠ¸ ì¸ì‹)
    document.body.insertAdjacentHTML("beforeend", `<input type="file" id="uploadImg" style="margin-top:20px" />`);
    document.getElementById("uploadImg").onchange = e => {
      let img = document.createElement("img");
      img.src = URL.createObjectURL(e.target.files[0]);
      document.body.appendChild(img);
      Tesseract.recognize(img.src, "kor+eng").then(({ data }) => {
        document.getElementById("ocrText").value = data.text;
      });
    };
  </script>
</body>
</html>
